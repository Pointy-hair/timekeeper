<!DOCTYPE html>
<html ng-app="timekeeperApp">
<meta charset="utf-8">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    
    
    <title>Time Keeper &middot; Home</title>
    <style type="text/css">
    	.line {
    		stroke: blueviolet;
			fill: none;
			stroke-linejoin: round;
			stroke-width: 5px;
			stroke-linecap: round;
    	}
    	svg {
    		background: lightcyan;
    		border: thin solid darkcyan;
    	}
	</style>
</head>
<body ng-controller="MainCtrl">
	<h1>Time Keeper</h1>
	<div id="chart">
	</div>
	<span ng-bind="msg"></span>

	<div ng-controller="DataCtrl">
		<span ng-bind="msg"></span>
		<pre>
{{service | json}}
		</pre>
	</div>


	<script type="text/javascript" src="dist/app.js"></script>
	<script type="text/javascript">
		var chart = timeSeriesChart()
	    .x(function(d) { return d.date; })
	    .y(function(d) { return d.task; });

		



		// d3.csv("sp500.csv", function(data) {
		// 	console.log("data: ", data);
  // 			d3.select("#chart")
  //     			.datum(data)
  //     			.call(chart);
		// });
		var timeFormat = d3.time.format('%Y-%m-%d %I:%M');
		var today = pointFactory('2014-10-08');
		var data = [
			today('8:00', 1),
			// today('11:00',1),
			today('11:00',2),
			// today('12:00',2),
			today('12:00',1), 
			// today('15:00', 1),
			today('15:00', 3),
			today('17:00', 3)
		];
		d3.select("#chart")
			.datum(data)
			.on('click', click)
			.call(chart);

		
		function click(a,b,c,d) {
			console.log(a,b,c,date);

		}
		function pointFactory(date) {
			var offset = new Date().getTimezoneOffset() * 60 * 1000;
			return function createPoint(time, task) {
				return {
					date: timeFormat.parse(date + ' ' + time),
					task: task
				}
			}	
		}
		

		
	</script>
</body>
</html>